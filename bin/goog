#!/bin/bash

url='https://www.google.com'

if [ $1 = '-l' ] ; then
    if [ $2 = 'ja' ] ; then
        url='https://www.google.co.jp'
        shift 2
    elif [ $2 = 'en' ] ; then
        shift 2
    else
        usage
        exit 1
    fi
fi

if [ "${1:+itfmayuge}" = 'itfmayuge' ] ; then
    query_str=$1
    shift
    while [ "${1:+itfmayuge}" = 'itfmayuge' ] ; do
        query_str="$query_str+$1"
        if [ "${2:+itfmayuge}" = 'itfmayuge' ] ; then
            shift
        else
            break
        fi
    done
    exec w3m "${url}/search?q=$query_str" -cookie
else
    exec w3m $url -cookie
fi
